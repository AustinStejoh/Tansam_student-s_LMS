{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQ Result - {{ course.title }}</title>
    <style>
        body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background: #f8fafc; margin: 0; color: #1e293b; }
        .container { max-width: 900px; margin: 2rem auto; background: #fff; border-radius: 14px; box-shadow: 0 6px 24px rgba(0,0,0,0.09); padding: 2rem 1.5rem; }
        .header { display:flex; align-items:center; justify-content:space-between; margin-bottom: 1rem; }
        .title { font-size: 1.25rem; font-weight: 700; color: #1e3a8a; }
        .score { text-align:center; padding: 1.25rem; border-radius: 12px; border: 1px solid #e5e7eb; background: #f1f5ff; margin-bottom: 1.25rem; }
        .score .percent { font-size: 2.4rem; font-weight: 800; }
        .pass { color: #15803d; font-weight: 700; }
        .fail { color: #be1e1e; font-weight: 700; }
        .details { margin-top: 1rem; }
        .q { border: 1px solid #e5e7eb; border-left-width: 6px; border-radius: 10px; padding: 1rem; margin-bottom: 0.9rem; background:#fff; }
        .q.correct { border-left-color: #16a34a; background: #f4fbf6; }
        .q.wrong { border-left-color: #ef4444; background: #fef2f2; }
        .q-title { font-weight: 600; margin-bottom: 0.4rem; }
        .opt { margin: 0.2rem 0; }
        .opt.correct { color: #065f46; font-weight: 600; }
        .opt.selected { text-decoration: underline; }
        .actions { display:flex; gap: 0.75rem; justify-content:flex-end; margin-top: 1.25rem; }
        .btn { display:inline-block; padding: 0.7rem 1.1rem; border-radius: 8px; text-decoration: none; font-weight: 600; }
        .btn.primary { background:#1e3a8a; color:#fff; }
        .btn.primary:hover { background:#3747c7; }
        .btn.secondary { background:#0b766d; color:#fff; }
        .btn.secondary:hover { background:#085e57; }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="title">{{ course.title }} â€” MCQ Result</div>
        <div><a class="btn" href="{% url 'course_detail' course.id %}">Back to Course</a></div>
    </div>
    <div class="score">
        <div class="percent">{{ score_percent }}%</div>
        {% if passed %}
            <div class="pass">You have passed. Congratulations!</div>
        {% else %}
            <div class="fail">Unfortunately you did not pass. Please try again!</div>
        {% endif %}
        <div>You have scored <b>{{ correct_count }}/{{ total_count }}</b>.</div>
    </div>

    <div class="details">
        {% for d in details %}
        <div class="q {% if d.is_correct %}correct{% else %}wrong{% endif %}">
            <div class="q-title">Q{{ d.index }}. {{ d.q.question_text }}</div>
            {% if d.q.image %}
            <div style="margin:0.4rem 0 0.6rem 0;"><img src="{{ d.q.image.url }}" alt="Question image" style="max-width: 280px; border-radius:8px;"></div>
            {% endif %}
            <div class="opt {% if d.correct == 1 %}correct{% endif %} {% if d.selected == 1 %}selected{% endif %}">1) {{ d.q.option_1 }}</div>
            <div class="opt {% if d.correct == 2 %}correct{% endif %} {% if d.selected == 2 %}selected{% endif %}">2) {{ d.q.option_2 }}</div>
            <div class="opt {% if d.correct == 3 %}correct{% endif %} {% if d.selected == 3 %}selected{% endif %}">3) {{ d.q.option_3 }}</div>
            <div class="opt {% if d.correct == 4 %}correct{% endif %} {% if d.selected == 4 %}selected{% endif %}">4) {{ d.q.option_4 }}</div>
        </div>
        {% endfor %}
    </div>

    <div class="actions">
        <a class="btn secondary" href="{% url 'dashboard' %}">Go to Dashboard</a>
        <a class="btn primary" href="{% url 'course_mcq' course.id %}">Retake MCQ</a>
    </div>
</div>
</body>
</html>
