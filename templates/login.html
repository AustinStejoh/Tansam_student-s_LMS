{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Tansam E-Learning Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* Using Georgia for the "Old Money" feel */
            font-family: 'Georgia', 'Times New Roman', serif;
        }
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            /* Lighter, warmer background */
            background-color: #F5F1E9; /* Example: parchment */
        }
        .login-container {
            background: #fff;
            padding: 3rem 2.5rem;
            border-radius: 8px; /* Slightly less rounded */
            /* Subtle shadow */
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 420px;
            text-align: center;
            /* Added a border matching button color */
            border: 1px solid #2D6B5A; /* Dark green border */
        }
        .login-container h2 {
            /* Deeper blue heading */
            color: #1E3A8A; /* Navy blue */
            margin-bottom: 2rem;
            font-size: 2rem;
            font-weight: 600;
        }
        .login-container form {
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
        }
        .login-container input {
            padding: 1rem;
            border-radius: 5px;
            /* Lighter border */
            border: 1px solid #E5E7EB; /* Light gray */
            font-size: 1rem;
            transition: border 0.3s, box-shadow 0.3s;
            font-family: 'Georgia', 'Times New Roman', serif; /* Ensure font consistency */
        }
        .login-container input:focus {
            border-color: #2D6B5A; /* Dark green focus */
            outline: none;
            box-shadow: 0 0 0 3px rgba(45, 107, 90, 0.2);
        }
        .login-container button {
            padding: 1rem;
            border-radius: 5px;
            border: none;
            /* Dark green button */
            background-color: #2D6B5A;
            color: #fff;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s;
            font-family: 'Georgia', 'Times New Roman', serif; /* Ensure font consistency */
        }
        .login-container button:hover {
            /* Slightly darker green on hover */
            background-color: #1F4A44;
        }

        /* --- Styles for Messages --- */
        .messages {
            list-style: none;
            padding: 0;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        /* Style for general error messages */
        .messages li.error {
            color: #9B2C2C; /* Darker red */
            font-size: 0.95rem;
            font-weight: 500;
            line-height: 1.4;
        }
        /* Style specifically for the 'not registered' error */
        .messages li.not_registered {
             margin-bottom: 0.5rem; /* Add space before contact info */
        }

        /* Container for the contact links */
        .help-contact-info {
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #4A5568; /* Grayish text */
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            align-items: flex-start;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        .help-contact-info a {
            color: #4A5568; /* Match text color */
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.6rem;
            transition: color 0.3s ease;
        }

        .help-contact-info a:hover {
            /* Warmer hover color */
            color: #D97706; /* Amber/gold */
        }

        .help-contact-info svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }

        @media (max-width: 500px) {
            .login-container { padding: 2rem 1.5rem; }
            .login-container h2 { font-size: 1.6rem; }
        }
    </style>
</head>
<body>
    <div class="login-container">
        <h2>Login to Tansam Portal</h2>

        {% if messages %}
            <ul class="messages">
                {# Display general errors first #}
                {% for message in messages %}
                    {% if 'not_registered' not in message.tags and 'contact' not in message.tags %}
                        <li class="{{ message.tags }}">{{ message }}</li>
                    {% endif %}
                {% endfor %}

                {# Display 'not registered' error specifically #}
                {% for message in messages %}
                    {% if 'not_registered' in message.tags %}
                        <li class="{{ message.tags }}">{{ message }}</li>
                    {% endif %}
                {% endfor %}

                {# Display contact info only if 'not_registered' error exists #}
                {% for message in messages %}
                    {% if 'not_registered' in message.tags %}
                        <div class="help-contact-info">
                            {# Mobile Link - Uses FIXED number #}
                            <a href="tel:12345678910">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459l-1.882-1.882a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58zM1.884.511a1.745 1.745 0 0 1 2.478 0l1.36 1.36a1.75 1.75 0 0 1 .46 1.657l-.548 2.19a.68.68 0 0 0 .122.58l2.307 1.794a.68.68 0 0 0 .58.122l2.19-.547a1.75 1.75 0 0 1 1.657.46l1.882 1.882a1.75 1.75 0 0 1 .459 1.657l-.547 2.19a.68.68 0 0 0 .122.58l1.794 2.307a.68.68 0 0 0 .58.122l1.36-1.36a1.745 1.745 0 0 1 2.478 0l.353.353a1.745 1.745 0 0 1 0 2.478l-1.36 1.36c-.712.713-1.653.957-2.58.74a19.1 19.1 0 0 1-7.668-4.66c-3.708-3.708-4.572-8.995-4.66-7.668.217-.926.023-1.868-.74-2.58L.51 3.23a1.745 1.745 0 0 1 0-2.478z"/></svg>
                                Mobile: 12345678910
                            </a>
                            {# WhatsApp Link - Uses FIXED number #}
                            <a href="https://wa.me/9876543210" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.626-2.957 6.584-6.591 6.584m-3.076-4.398c-.14-.07-.82-.403-1.02-.452c-.198-.048-.344-.07-.488.07c-.145.14-.543.53-.667.648c-.124.118-.247.132-.443.047c-.197-.085-.837-.31-1.59-.985c-.59-.524-.984-1.175-1.103-1.37c-.118-.195-.012-.303.06-.403c.068-.095.144-.23.214-.343c.07-.114.095-.19.14-.313c.047-.123.023-.23.004-.303c-.02-.074-.443-1.063-.607-1.448c-.16-.38-.32-.327-.443-.33c-.118-.004-.247-.004-.375-.004c-.128 0-.344.047-.52.23c-.174.18-.65.63-.65 1.54c0 .91.666 1.787.76 1.93C3.06 9.71 4.24 11.77 6.2 12.713c.386.19.69.306.94.39c.5.17.95.145 1.32.09c.41-.06.82-.25 1.02-.49c.198-.24.198-.44.14-.49c-.06-.05-.198-.11-.443-.207"/></svg>
                                WhatsApp: 9876543210
                            </a>
                        </div>
                        {# NOTE: The {% break %} tag was removed from here #}
                    {% endif %}
                {% endfor %}
            </ul>
        {% endif %}

        <form method="POST" action="{% url 'login' %}">
            {% csrf_token %}
            <input type="text" name="phone" placeholder="Phone Number"
                   value="{{ phone_attempted|default:'' }}" required> {# Pre-fill attempted number #}
            <button type="submit">Login</button>
        </form>
    </div>
</body>
</html>